---
description: Frontend architecture and boundaries (feature-first).
globs: ["frontend/src/**"]
alwaysApply: true
---
# Frontend Structure (Feature-first)

## 1) Folder layout (single source of truth)
- Features own product code:
  - `features/<feature>/pages/*` (route-level screens)
  - `features/<feature>/components/*` (feature UI)
  - `features/<feature>/hooks/*` (feature hooks)
  - `features/<feature>/api/*` (feature services calling the HTTP client)
  - `features/<feature>/types.ts`
  - `features/<feature>/index.ts` (public exports only)

- Shared UI + layout:
  - `components/ui/*` reusable primitives (Button, Input, Modal, Table, Badge, etc.)
  - `components/layout/*` app shells (AppLayout, nav, etc.)

- Infrastructure:
  - `lib/api.ts` HTTP client (baseURL, interceptors, auth header, error normalization)
  - optional `lib/utils.ts` small helpers

> Avoid `routes/` unless it’s only a thin router config file. Route screens live in `features/*/pages`.

## 2) Import boundaries (strict)
- `components/*` MUST NOT import from `features/*`.
- A feature MUST NOT import another feature’s internal files.
- Cross-feature usage (if needed) MUST import from the feature’s public barrel:
  - ✅ `import { X } from "@/features/auth"`
  - ❌ `import { X } from "@/features/auth/components/X"`

## 3) API layering
- Components/pages DO NOT call `lib/api.ts` directly.
- Pages/components call feature hooks/services.
- Feature services (`features/<feature>/api/*`) are the only place calling `lib/api.ts`.
- API functions return typed data and throw normalized errors.

## 4) Page composition rule
- Pages orchestrate data & UI composition.
- Extract tables/modals/complex widgets into `features/<feature>/components`.
- Extract shared patterns into `components/ui` once used by 2+ features.
- Keep files under ~200 LOC. If >200 LOC, split.

## 5) State rule (MVP-friendly)
- Prefer local state + feature hooks.
- Use small feature-scoped context only when needed (avoid global state libs for MVP).
- Debounce search inputs when they trigger API calls.

## 6) Styling
- Tailwind utilities only; keep `index.css` minimal (base + fonts).